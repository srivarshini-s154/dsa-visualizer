{% extends "base.html" %}

{% block title %}Queue Visualization - Data Structures Visualizer{% endblock %}

{% block styles %}
<link rel="stylesheet" href="{{ url_for('static', filename='css/queues.css') }}">
{% endblock %}

{% block content %}
<div class="queue-container">
    <div class="queue-header">
        <h1>Queue Data Structure</h1>
        <div class="queue-description">
            <p>A queue is a linear data structure that follows the First-In-First-Out (FIFO) principle. This means that the first element added to the queue will be the first one to be removed. Think of it like a line of people waiting - the first person in line is the first to be served.</p>
            <p>In computer science, queues are used in various applications including CPU scheduling, handling requests, buffering, and breadth-first search algorithms. Our visualization demonstrates how basic queue operations work and how they can be applied to different scenarios.</p>
        </div>
    </div>
    
    <div class="queue-types-tabs">
        <button class="queue-type-btn active" data-type="linear">Linear Queue</button>
        <button class="queue-type-btn" data-type="circular">Circular Queue</button>
        <button class="queue-type-btn" data-type="deque">Double Ended Queue</button>
        <button class="queue-type-btn" data-type="priority">Priority Queue</button>
    </div>
    
    <div class="main-content">
        <!-- Left column for operation history -->
        <div class="left-column">
            <div class="operation-history">
                <h3>Operation History</h3>
                <div id="history-list"></div>
            </div>
        </div>
        
        <!-- Middle column for queue visualization -->
        <div class="middle-column">
            <div class="visualization-section">
                <h2 id="visualization-title">Linear Queue Visualization</h2>
                <div class="queue-visualization">
                    <div class="queue-container-graphic">
                        <div class="queue-front">
                            <div class="pointer-label">FRONT</div>
                            <div class="pointer-arrow">→</div>
                        </div>
                        <div id="queue-elements"></div>
                        <div class="queue-rear">
                            <div class="pointer-arrow">→</div>
                            <div class="pointer-label">REAR</div>
                        </div>
                    </div>
                </div>
                
                <div class="queue-info">
                    <div class="info-box">
                        <h3>Queue Information</h3>
                        <p>Size: <span id="queue-size">0</span></p>
                        <p>Capacity: <span id="queue-capacity">10</span></p>
                        <p>Front Element: <span id="front-element">None</span></p>
                        <p>Rear Element: <span id="rear-element">None</span></p>
                    </div>
                </div>
                
                <!-- Queue operations below visualization -->
                <div class="queue-operations">
                    <h3>Queue Operations</h3>
                    
                    <div class="enqueue-operation">
                        <h4>Enqueue Operation</h4>
                        <div class="input-group">
                            <input type="number" id="element-value" placeholder="Enter value" min="1" max="999">
                            <button id="enqueue-btn" class="btn-operation enqueue">Enqueue</button>
                        </div>
                        
                        <!-- Priority input (for priority queue) -->
                        <div class="priority-input" id="priority-input" style="display: none;">
                            <label for="priority-value">Priority (1-10):</label>
                            <input type="number" id="priority-value" min="1" max="10" value="5">
                        </div>
                    </div>
                    
                    <div class="other-operations">
                        <h4>Other Operations</h4>
                        <div class="secondary-operations">
                            <button id="dequeue-btn" class="btn-operation dequeue">Dequeue</button>
                            <button id="peek-btn" class="btn-operation secondary">Peek</button>
                            <button id="clear-btn" class="btn-operation secondary">Clear Queue</button>
                            <button id="size-btn" class="btn-operation secondary">Get Size</button>
                            <button id="isEmpty-btn" class="btn-operation secondary">Is Empty?</button>
                            <button id="isFull-btn" class="btn-operation secondary">Is Full?</button>
                        </div>
                    </div>
                    
                    <!-- Deque specific operations -->
                    <div class="deque-operations" id="deque-operations" style="display: none;">
                        <h4>Deque Operations</h4>
                        <div class="secondary-operations">
                            <button id="enqueue-front-btn" class="btn-operation secondary">Enqueue Front</button>
                            <button id="dequeue-rear-btn" class="btn-operation secondary">Dequeue Rear</button>
                        </div>
                    </div>
                </div>
            </div>
            
            <!-- CPU Scheduling Visualization (for Priority Queue) -->
            <div class="scheduling-section" id="scheduling-section" style="display: none;">
                <h3>Non-Preemptive Priority CPU Scheduler</h3>
                
                <div class="scheduler-input">
                    <h4>Add Process</h4>
                    <div class="process-input-group">
                        <div class="input-field">
                            <label for="process-id">Process ID:</label>
                            <input type="text" id="process-id" placeholder="e.g., P1">
                        </div>
                        <div class="input-field">
                            <label for="arrival-time">Arrival Time:</label>
                            <input type="number" id="arrival-time" min="0" value="0">
                        </div>
                        <div class="input-field">
                            <label for="burst-time">Burst Time:</label>
                            <input type="number" id="burst-time" min="1" value="1">
                        </div>
                        <div class="input-field">
                            <label for="process-priority">Priority (1-3):</label>
                            <input type="number" id="process-priority" min="1" max="3" value="1">
                        </div>
                        <button id="add-process-btn" class="btn-operation enqueue">Add Process</button>
                    </div>
                </div>
                
                <div class="scheduler-controls">
                    <button id="calculate-btn" class="btn-operation application">Calculate Schedule</button>
                    <button id="reset-scheduler-btn" class="btn-operation secondary">Reset</button>
                </div>
                
                <div class="process-table">
                    <h4>Process Table</h4>
                    <table id="process-table">
                        <thead>
                            <tr>
                                <th>Process</th>
                                <th>Arrival Time</th>
                                <th>Burst Time</th>
                                <th>Priority</th>
                                <th>Completion Time</th>
                                <th>Waiting Time</th>
                                <th>Turnaround Time</th>
                            </tr>
                        </thead>
                        <tbody id="process-table-body">
                            <!-- Process rows will be inserted here -->
                        </tbody>
                        <tfoot id="process-table-footer">
                            <!-- Average times will be inserted here -->
                        </tfoot>
                    </table>
                </div>
                
                <div class="gantt-chart">
                    <h4>Gantt Chart</h4>
                    <div id="gantt-container"></div>
                </div>
                
                <div class="execution-steps">
                    <h4>Execution Steps</h4>
                    <div id="execution-steps-container"></div>
                </div>
            </div>
        </div> <!-- End of middle-column -->
        
        <!-- Right column for complexity table -->
        <div class="right-column">
            <div class="complexity-table">
                <h3>Queue Operations Complexity</h3>
                <table>
                    <thead>
                        <tr>
                            <th>Operation</th>
                            <th>Description</th>
                            <th>Time Complexity</th>
                            <th>Space Complexity</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr>
                            <td>Enqueue</td>
                            <td>Inserts an element in the queue through rear pointer</td>
                            <td>O(1)</td>
                            <td>O(1)</td>
                        </tr>
                        <tr>
                            <td>Dequeue</td>
                            <td>Removes an element from the queue through front pointer</td>
                            <td>O(1)</td>
                            <td>O(1)</td>
                        </tr>
                        <tr>
                            <td>Peek</td>
                            <td>Returns the front element of the queue</td>
                            <td>O(1)</td>
                            <td>O(1)</td>
                        </tr>
                        <tr>
                            <td>IsFull</td>
                            <td>Returns true if the queue is full otherwise returns false</td>
                            <td>O(1)</td>
                            <td>O(1)</td>
                        </tr>
                        <tr>
                            <td>IsEmpty</td>
                            <td>Returns true if the queue is empty otherwise returns false</td>
                            <td>O(1)</td>
                            <td>O(1)</td>
                        </tr>
                    </tbody>
                </table>
            </div>
        </div>
    </div>
</div>
{% endblock %}

{% block scripts %}
<script src="{{ url_for('static', filename='js/queues.js') }}"></script>
{% endblock %}